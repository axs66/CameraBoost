# CameraBoost 项目总结

## 项目概述

CameraBoost 是一个为 iOS 15+ 系统多巴胺 rootless 无根越狱设计的相机增强插件，合并了四个独立的相机功能项目。

## 合并的原始项目

### 1. CamElapsed+ 
- **功能**: 为视频录制计时器添加亚秒显示
- **特性**: 支持 1-3 位小数精度的时间显示
- **用途**: 提供更精确的录制时间信息

### 2. Record 'n' Torch
- **功能**: 在录制视频时控制闪光灯
- **特性**: 录制过程中可以开关闪光灯
- **用途**: 提供更好的照明控制

### 3. RecordPause
- **功能**: 暂停和恢复视频录制
- **特性**: 无需停止录制即可暂停
- **用途**: 分段录制，提高录制灵活性

### 4. TapVideoConfig
- **功能**: 直接在相机应用中更改视频配置
- **特性**: 支持多种分辨率和帧率设置
- **用途**: 快速调整录制参数

## 技术实现

### 架构设计
- **框架**: 基于 Theos 框架开发
- **语法**: 使用 Logos 语法进行方法钩子
- **兼容性**: 支持 iOS 15.0+ 系统
- **越狱**: 兼容多巴胺 rootless 无根越狱

### 核心功能模块

#### 1. 亚秒计时器 (CAMElapsedTimeView)
```objective-c
- 支持 0-3 位小数精度
- 实时更新计时器显示
- 暂停/恢复计时器功能
```

#### 2. 闪光灯控制 (CAMViewfinderViewController)
```objective-c
- 录制时闪光灯控制
- 视觉指示器支持
- 前后摄像头兼容
```

#### 3. 录制暂停 (CAMBottomBar, CAMDynamicShutterControl)
```objective-c
- 暂停/恢复按钮界面
- 状态指示器
- 布局适配
```

#### 4. 视频配置 (CAMFramerateIndicatorView)
```objective-c
- 点击切换配置
- 多分辨率支持
- 实时配置更新
```

### 文件结构
```
CameraBoost/
├── control                    # 包控制文件
├── Makefile                  # 构建配置
├── Tweak.x                   # 主要功能实现
├── Common.h                  # 公共头文件
├── Header.h                  # 导入头文件
├── README.md                 # 项目说明
├── LICENSE                   # 许可证
├── build.sh                  # 构建脚本
├── .gitignore               # Git 忽略文件
├── DEBIAN/                   # 安装脚本
│   ├── postinst             # 安装后脚本
│   └── prerm                # 卸载前脚本
└── layout/                   # 资源文件
    └── Library/
        ├── Application Support/
        │   └── CameraBoost.bundle/
        └── PreferenceLoader/
            └── Preferences/
                └── CameraBoost/
                    └── Preferences.plist
```

## 功能特性

### 1. 亚秒计时器
- **默认格式**: HH:mm:ss
- **1位小数**: HH:mm:ss.S
- **2位小数**: HH:mm:ss.SS  
- **3位小数**: HH:mm:ss.SSS

### 2. 录制控制
- **暂停/恢复**: 录制过程中暂停和恢复
- **视觉反馈**: 黄色指示器显示暂停状态
- **按钮布局**: 自适应不同屏幕尺寸

### 3. 闪光灯控制
- **录制时控制**: 录制过程中开关闪光灯
- **兼容性**: 支持前后摄像头
- **无缝集成**: 与原生相机控制集成

### 4. 视频配置
- **分辨率选项**: 4K, 1080p, 720p
- **帧率选项**: 24fps, 30fps, 60fps, 120fps, 240fps
- **快速切换**: 点击帧率指示器切换配置

## 设置界面

### 配置选项
1. **亚秒精度设置**: 选择计时器显示精度
2. **暂停/恢复功能**: 启用/禁用录制暂停
3. **闪光灯控制**: 启用/禁用录制时闪光灯控制
4. **视频配置**: 启用/禁用视频配置功能

### 设置路径
```
设置 > CameraBoost
```

## 构建和安装

### 构建要求
- Theos 框架
- iOS 15.0+ SDK
- 多巴胺 rootless 越狱环境

### 构建命令
```bash
# 清理构建
make clean

# 构建包
make package

# 或使用构建脚本
./build.sh
```

### 安装步骤
1. 构建生成 .deb 文件
2. 传输到设备
3. 使用包管理器安装
4. 重启设备
5. 在设置中配置

## 兼容性

### 系统要求
- **iOS 版本**: 15.0 - 17.x
- **越狱类型**: 多巴胺 rootless
- **设备**: iPhone 和 iPad
- **架构**: arm64, arm64e

### 依赖项
- mobilesubstrate
- preferenceloader
- iOS 15.0+ 固件

## 技术优势

### 1. 代码整合
- 将四个独立项目合并为单一插件
- 统一设置界面
- 减少系统资源占用

### 2. 兼容性优化
- 针对 iOS 15+ 系统优化
- 支持 rootless 越狱环境
- 最小化系统影响

### 3. 用户体验
- 统一的功能入口
- 直观的设置界面
- 无缝的相机集成

## 开发特点

### 1. 模块化设计
- 功能模块独立
- 易于维护和扩展
- 清晰的代码结构

### 2. 错误处理
- 完善的异常处理
- 兼容性检查
- 优雅降级

### 3. 性能优化
- 最小化内存占用
- 高效的更新机制
- 优化的用户界面

## 未来扩展

### 可能的功能增强
1. **更多计时器格式**: 支持自定义时间格式
2. **录制质量设置**: 更细粒度的质量控制
3. **手势控制**: 添加手势操作支持
4. **主题支持**: 自定义界面主题

### 技术改进
1. **性能优化**: 进一步减少资源占用
2. **兼容性**: 支持更多 iOS 版本
3. **稳定性**: 增强错误处理机制

## 总结

CameraBoost 成功将四个独立的相机增强功能合并为一个统一的插件，为 iOS 15+ 多巴胺 rootless 越狱用户提供了完整的相机增强解决方案。通过模块化设计和统一设置界面，用户可以获得更好的使用体验，同时开发者也能更容易地维护和扩展功能。
